/**!
 * baby-ajax - v1.1.7
 * One is only 5KB ajax library
 *
 * Sat Feb 10 2018 17:09:26 GMT+0800 (中国标准时间)
 * MIT (c) hold-baby
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Ajax=e()}(this,function(){"use strict";function t(t,e,o){for(var s in this.type=t,this.opts=e,this.postData=o,this.catch=e.catch,this.mobileHandle=e.mobileHandle,this.xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.mobileHandle&&"function"==typeof this.mobileHandle&&(MOBLIE_CATCH.push(this.xmlHttp),this.mobileHandle()),this.xmlHttp.open(e.method,e.url,e.async),this.xmlHttp.withCredentials=e.withCredentials,this.opts.headers)this.xmlHttp.setRequestHeader(s,this.opts.headers[s]);return"methods_1"==t?this.xmlHttp.send(null):this.xmlHttp.send(this.postData),this}function e(t,e){for(var o in e)t[o]=e[o];return e}function o(t){try{var e=JSON.parse(t.responseText)}catch(o){e=t.responseText}return{status:t.status,data:e}}function s(e){return new t("methods_1",e)}function n(e){var o=e,s=[];for(var n in o.data)s.push(n+"="+o.data[n]);s.join("&");return new t("methods_2",o,JSON.stringify(o.data))}function i(t){return{res:JSON.parse(t.target.responseText),status:t.target.status}}function r(t,e,o){var s,n,r=this;this.xmlHttp=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.dom=o,this.xmlHttp.onload=function(e){var o=i(e).res,s=i(e).status;r.onSuccessItem(t,o,s)},this.xmlHttp.onerror=function(e){var o=i(e).res,s=i(e).status;r.onErrorItem(t,o,s)},this.xmlHttp.upload.onprogress=function(e){var o={},i={};e.lengthComputable&&(i.max=e.total,i.value=e.loaded,o.percent=Math.round(e.loaded/e.total*100));var a=((new Date).getTime()-s)/1e3;s=(new Date).getTime();var p=e.loaded-n;n=e.loaded;var h=p/a,l=h,u="b/s";h/1024>1&&(h/=1024,u="kb/s");h/1024>1&&(h/=1024,u="Mb/s");h=h.toFixed(1);var d=((e.total-e.loaded)/l).toFixed(1);o.speed=h+u,o.resttime=d,0==l&&(o.bspeed="上传已取消");r.onProgressItem(t,o)},this.onSuccessItem=function(){},this.onBeforeUploadItem=function(){},this.onErrorItem=function(){},this.onProgressItem=function(){},this.xmlHttp.upload.onloadstart=function(){s=(new Date).getTime(),n=0},setTimeout(function(){r.onBeforeUploadItem(t),r.xmlHttp.open("post",e.url,!0),r.xmlHttp.send(t)},100)}function a(){this.opts={},this.opts.headers={"Content-Type":"application/json;charset=utf-8"},this.opts.method="POST",this.opts.async=!0,this.opts.data=null,this.opts.url="",this.opts.baseUrl="",this.withCredentials=!1,this.catch=function(){},this.mobileHandle=null}t.prototype.then=function(t,e){var s=this;4==this.xmlHttp.readyState?(this.catch(o(this.xmlHttp)),this.xmlHttp.status>=200&&this.xmlHttp.status<300?t(o(this.xmlHttp)):e(o(this.xmlHttp))):setTimeout(function(){s.then(t,e)},20)},r.prototype.cancleUploadFile=function(){this.xmlHttp.abort()},r.prototype.clearUploadFile=function(){this.dom.value=""},window.MOBLIE_CATCH=[],a.prototype.creatOpts=function(t){var o=this.opts;for(var s in t)"headers"==s&&(o[s]=e(o[s],t[s])),o[s]=t[s];return o.method=t.method&&t.method.toUpperCase(),o.catch=this.catch,o.mobileHandle=this.mobileHandle,o},a.prototype.ajax=function(e){var o=this.creatOpts(e);return-1!==h.indexOf(o.method.toLowerCase())?n(o):-1!==p.indexOf(o.method.toLowerCase())?s(o):(o.url=this.opts.baseUrl+o.url,new t(o,xmlHttp))},a.prototype.config=function(t){for(var o in t)"headers"!=o?this.opts[o]=t[o]:t[o]=e(this.opts[o],t[o])};var p=["get","delete","head","options"],h=["post","put","patch"];for(var l in p)!function(t,e){a.prototype[t[e]]=function(o,n){var i=this.creatOpts(n||{});return i.method=t[e].toUpperCase(),i.url=this.opts.baseUrl+o,s(i)}}(p,l);for(var u in h)!function(t,e){a.prototype[t[e]]=function(o,s,i){return(i=this.creatOpts(i||{})).method=t[e].toUpperCase(),i.url=this.opts.baseUrl+o,i.data=s||{},n(i)}}(h,u);return a.prototype.uploader=function(t,e){var o=t.files[0],s=new FormData;return s.append("file",o),new r(s,e,t)},new a});
//# sourceMappingURL=ajax.min.js.map
