{"version":3,"sources":["ajax.js"],"names":["global","factory","exports","module","define","amd","Ajax","this","xhrObj","type","opts","postData","i","catch","xmlHttp","window","XMLHttpRequest","ActiveXObject","open","method","url","async","withCredentials","headers","setRequestHeader","send","mergeHeaders","_headers","parseResponse","res","content","JSON","parse","responseText","e","status","data","request_1","_opts","request_2","params","key","push","join","stringify","parseFileRes","evt","target","XhrFile","opt","dom","ot","oloaded","_this","onload","fileItem","isUpload","isUploadding","onSuccessItem","clearUploadFile","onerror","isError","onErrorItem","upload","onprogress","progress","progressBar","lengthComputable","max","total","value","loaded","percent","Math","round","pertime","Date","getTime","perload","speed","bspeed","units","toFixed","resttime","onProgressItem","onBeforeUploadItem","onloadstart","onchange","autoUpload","Content-Type","baseUrl","prototype","then","success","error","readyState","setTimeout","fileObj","files","form","FormData","append","formData","addr","isCancel","isUploadClear","cancleUploadFile","abort","creatOpts","toUpperCase","ajax","methods_2","indexOf","toLowerCase","methods_1","config","j","uploader","id","document","getElementById"],"mappings":"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","file":"ajax.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Ajax = factory());\n}(this, (function () { 'use strict';\n\n/*\r\n  xml请求构造函数\r\n*/\nfunction xhrObj(type, opts, postData) {\n\tthis.type = type;\n\tthis.opts = opts;\n\tthis.postData = postData;\n\tthis.catch = opts.catch || function () {};\n\tthis.xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\n\n\tthis.xmlHttp.open(opts.method, opts.url, opts.async);\n\tthis.xmlHttp.withCredentials = opts.withCredentials;\n\tfor (var i in this.opts.headers) {\n\t\tthis.xmlHttp.setRequestHeader(i, this.opts.headers[i]);\n\t}\n\tif (type == \"methods_1\") {\n\t\tthis.xmlHttp.send(null);\n\t} else {\n\n\t\tthis.xmlHttp.send(this.postData);\n\t}\n\treturn this;\n}\n/*\r\n  请求回调\r\n*/\nxhrObj.prototype.then = function (success, error) {\n\tvar _this = this;\n\n\tif (this.xmlHttp.readyState == 4) {\n\t\tthis.catch(parseResponse(this.xmlHttp));\n\t\tif (this.xmlHttp.status >= 200 && this.xmlHttp.status < 300) {\n\t\t\tsuccess(parseResponse(this.xmlHttp));\n\t\t} else {\n\t\t\terror(parseResponse(this.xmlHttp));\n\t\t}\n\t} else {\n\t\tsetTimeout(function () {\n\t\t\t_this.then(success, error);\n\t\t}, 20);\n\t}\n};\n\n// 请求headers合并\nfunction mergeHeaders(headers, _headers) {\n\tfor (var i in _headers) {\n\t\theaders[i] = _headers[i];\n\t}\n\treturn _headers;\n}\n// 构建返回体\nfunction parseResponse(res) {\n\ttry {\n\t\tvar content = JSON.parse(res.responseText);\n\t} catch (e) {\n\t\tvar content = res.responseText;\n\t}\n\tvar data = {\n\t\tstatus: res.status,\n\t\tdata: content\n\t};\n\treturn data;\n}\n\nfunction request_1(_opts) {\n\treturn new xhrObj(\"methods_1\", _opts);\n}\n\nfunction request_2(_opts) {\n\tvar opts = _opts;\n\tvar params = [];\n\tfor (var key in opts.data) {\n\t\tparams.push(key + '=' + opts.data[key]);\n\t}\n\tvar postData = params.join('&');\n\tvar postData = JSON.stringify(opts.data);\n\treturn new xhrObj(\"methods_2\", opts, postData);\n}\n\n// 构建上传返回体\nfunction parseFileRes(evt) {\n\treturn {\n\t\tres: JSON.parse(evt.target.responseText),\n\t\tstatus: evt.target.status\n\t};\n}\n\n/*\r\n  xml上传文件\r\n*/\nfunction XhrFile(opt, dom) {\n    var _this = this;\n    this.dom = dom;\n    this.opt = opt;\n\n    this.xmlHttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\n    this.xmlHttp.onload = uploadComplete; // 请求完成\n    this.xmlHttp.onerror = uploadFailed; // 请求失败\n    this.xmlHttp.upload.onprogress = progressFunction; // 上传进度调用方法实现\n\n    this.onSuccessItem = function () {};\n    this.onBeforeUploadItem = function () {};\n    this.onErrorItem = function () {};\n    this.onProgressItem = function () {};\n\n    var ot, oloaded;\n    this.xmlHttp.upload.onloadstart = function () {\n        //上传开始执行方法\n        ot = new Date().getTime(); //设置上传开始时间\n        oloaded = 0; //设置上传开始时，以上传的文件大小为0\n        _this.fileItem.isUploadding = true;\n    };\n\n    // 给input绑定change事件\n    this.dom.onchange = function () {\n        if (_this.opt.autoUpload || false) {\n            _this.upload();\n        }\n    };\n\n    //上传成功响应\n    function uploadComplete(evt) {\n        //服务断接收完文件返回的结果\n        var res = parseFileRes(evt).res;\n        var status = parseFileRes(evt).status;\n        _this.fileItem.isUpload = true;\n        _this.fileItem.isUploadding = false;\n        _this.onSuccessItem(_this.fileItem, res, status);\n        _this.clearUploadFile();\n    }\n    //上传失败\n    function uploadFailed(evt) {\n        var res = parseFileRes(evt).res;\n        var status = parseFileRes(evt).status;\n        _this.fileItem.isError = true;\n        _this.fileItem.isUploadding = false;\n        _this.onErrorItem(_this.fileItem, res, status);\n        _this.clearUploadFile();\n    }\n\n    //上传进度实现方法，上传过程中会频繁调用该方法\n    function progressFunction(evt) {\n        var progress = {}; // 包含上传百分百 速度\n        var progressBar = {};\n        if (evt.lengthComputable) {\n            //\n            progressBar.max = evt.total;\n            progressBar.value = evt.loaded;\n            progress.percent = Math.round(evt.loaded / evt.total * 100);\n        }\n        var nt = new Date().getTime(); //获取当前时间\n        var pertime = (nt - ot) / 1000; //计算出上次调用该方法时到现在的时间差，单位为s\n        ot = new Date().getTime(); //重新赋值时间，用于下次计算\n        var perload = evt.loaded - oloaded; //计算该分段上传的文件大小，单位b\n        oloaded = evt.loaded; //重新赋值已上传文件大小，用以下次计算\n        //上传速度计算\n        var speed = perload / pertime; //单位b/s\n        var bspeed = speed;\n        var units = 'b/s'; //单位名称\n        if (speed / 1024 > 1) {\n            speed = speed / 1024;\n            units = 'kb/s';\n        }\n        if (speed / 1024 > 1) {\n            speed = speed / 1024;\n            units = 'Mb/s';\n        }\n        speed = speed.toFixed(1);\n        //剩余时间\n        var resttime = ((evt.total - evt.loaded) / bspeed).toFixed(1);\n        progress.speed = speed + units;\n        progress.resttime = resttime;\n\n        if (bspeed == 0) progress.bspeed = '上传已取消';\n        _this.onProgressItem(_this.fileItem, progress);\n    }\n}\n\n// 开始上传\nXhrFile.prototype.upload = function () {\n    if (!this.dom.value) return;\n    var _this = this;\n\n    var fileObj = this.dom.files[0]; // js 获取文件对象\n    var form = new FormData();\n    form.append(\"file\", fileObj); // 文件对象\n    form.append(\"parm\", JSON.stringify(this.opt.data)); // 文件对象添加额外参数\n\n    // 构建fileItem\n    var fileItem = {\n        formData: form,\n        url: this.opt.url || \"\",\n        data: this.opt.data || \"\",\n        addr: this.dom.value || \"\",\n        isUpload: false,\n        isCancel: false,\n        isUploadding: false,\n        isError: false,\n        isUploadClear: this.opt.isUploadClear || false,\n        autoUpload: this.opt.autoUpload || false\n    };\n\n    this.fileItem = fileItem;\n\n    // 怎么延时确保自定义函数已绑定\n    setTimeout(function () {\n        _this.onBeforeUploadItem(_this.fileItem);\n        _this.xmlHttp.open(\"post\", _this.fileItem.url, true); //post方式，url为服务器请求地址，true 该参数规定请求是否异步处理。\n\n        if (_this.opt.headers) {\n            for (var i in _this.opt.headers) {\n                _this.xmlHttp.setRequestHeader(i, _this.opt.headers[i]);\n            }\n        }\n\n        _this.xmlHttp.send(_this.fileItem.formData); //开始上传，发送form数据\n    }, 20);\n};\n\n// 取消上传\nXhrFile.prototype.cancleUploadFile = function () {\n    _this.fileItem.isCancel = true;\n    _this.fileItem.isUploadding = false;\n    _this.fileItem.isUpload = false;\n    this.xmlHttp.abort();\n    this.clearUploadFile();\n};\n// 清除文件\nXhrFile.prototype.clearUploadFile = function () {\n    if (this.fileItem.isUploadClear) {\n        // this.dom.outerHTML = this.dom.outerHTML;\n        this.dom.value = \"\";\n        this.dom.files = null;\n    }\n};\n\n/*\r\n    ajax构造函数\r\n*/\nfunction Ajax() {\n\t// 注册初始配置\n\tthis.opts = {};\n\tthis.opts.headers = {\n\t\t'Content-Type': 'application/json;charset=utf-8'\n\t};\n\tthis.opts.method = 'POST';\n\tthis.opts.async = true;\n\tthis.opts.data = null;\n\tthis.opts.url = \"\";\n\tthis.opts.baseUrl = \"\";\n\n\t// 默认跨域不带cookie\n\tthis.withCredentials = false;\n\n\t// 注册拦截函数\n\tthis.catch = function () {};\n}\n\n/*\r\n  整合opt\r\n*/\nAjax.prototype.creatOpts = function (opts) {\n\tvar _opts = this.opts;\n\tfor (var i in opts) {\n\t\tif (i == \"headers\") {\n\t\t\t_opts[i] = mergeHeaders(_opts[i], opts[i]);\n\t\t}\n\t\t_opts[i] = opts[i];\n\t}\n\n\t_opts.method = opts.method && opts.method.toUpperCase();\n\n\t_opts.catch = this.catch;\n\treturn _opts;\n};\n\n/*\r\n  ajax方法\r\n*/\nAjax.prototype.ajax = function (_opts) {\n\tvar opts = this.creatOpts(_opts);\n\tif (methods_2.indexOf(opts.method.toLowerCase()) !== -1) {\n\t\tvar xml = request_2(opts);\n\t\treturn xml;\n\t} else if (methods_1.indexOf(opts.method.toLowerCase()) !== -1) {\n\t\tvar xml = request_1(opts);\n\t\treturn xml;\n\t}\n\topts.url = this.opts.baseUrl + opts.url;\n\tvoid 0;\n\treturn new xhrObj(opts, xmlHttp);\n};\n\n/*\r\n  暴露一个配置方法\r\n*/\nAjax.prototype.config = function (opts) {\n\tfor (var i in opts) {\n\t\tif (i == \"headers\") {\n\t\t\topts[i] = mergeHeaders(this.opts[i], opts[i]);\n\t\t\tcontinue;\n\t\t}\n\t\tthis.opts[i] = opts[i];\n\t}\n};\n\n// 请求方法集合\nvar methods_1 = ['get', 'del', 'head', 'options']; //不带data\nvar methods_2 = ['post', 'put', 'patch']; //带data\nfor (var i in methods_1) {\n\t!function (methods_1, i) {\n\t\tAjax.prototype[methods_1[i]] = function (url, _opts) {\n\n\t\t\tvar opts = this.creatOpts(_opts || {});\n\t\t\topts.method = methods_1[i].toUpperCase();\n\t\t\topts.url = this.opts.baseUrl + url;\n\n\t\t\tvar xml = request_1(opts);\n\t\t\treturn xml;\n\t\t};\n\t}(methods_1, i);\n}\nfor (var j in methods_2) {\n\t!function (methods_2, j) {\n\t\tAjax.prototype[methods_2[j]] = function (url, data, opts) {\n\t\t\topts = this.creatOpts(opts || {});\n\t\t\topts.method = methods_2[j].toUpperCase();\n\t\t\topts.url = this.opts.baseUrl + url;\n\t\t\topts.data = data || {};\n\n\t\t\tvar xml = request_2(opts);\n\t\t\treturn xml;\n\t\t};\n\t}(methods_2, j);\n}\n\n/*\r\n  文件上传\r\n*/\nAjax.prototype.uploader = function (id, opt) {\n\tvar dom = document.getElementById(id);\n\tif (dom.type !== \"file\") return;\n\n\topt.url = this.opts.baseUrl + opt.url;\n\n\treturn new XhrFile(opt, dom);\n};\n\n// 检验是否浏览器环境\ntry {\n    \n} catch (ex) {\n    throw new Error('请在浏览器环境下运行');\n}\n\nvar index = new Ajax();\n\nreturn index;\n\n})));\n"]}