{"version":3,"sources":["ajax.js"],"names":["global","factory","exports","module","define","amd","self","Ajax","this","mergeOpt","opt","opt2","i","j","Xhr","resolve","reject","xhr","window","XMLHttpRequest","ActiveXObject","onreadystatechange","readyState","res","responseText","JSON","parse","status","headers","getAllResponseHeaders","split","catch","open","method","url","async","setRequestHeader","send","data","isPromise","Promise","Defer","bind","then","call","FileUpload","dom","ot","oloaded","_this","onload","evt","parseFileRes","fileItem","isUpload","isUploadding","onSuccessItem","clearUploadFile","onerror","isError","onErrorItem","upload","onprogress","progress","progressBar","lengthComputable","max","total","value","loaded","percent","Math","round","pertime","Date","getTime","perload","speed","bspeed","units","toFixed","resttime","onProgressItem","onloadstart","target","defaultOpt","baseUrl","Content-Type","withCredentials","prototype","file","files","form","FormData","append","stringify","formData","addr","isCancel","isUploadClear","autoUpload","onBeforeUploadItem","cancleUploadFile","abort","methods_1","methods_2","_loop","_opts","opts","toUpperCase","_loop2","cache","push","join","ajax","options","toLowerCase","indexOf","Error","e","config","uploader","id","_opt","document","getElementById"],"mappings":"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","file":"ajax.min.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global = global || self, global.Ajax = factory());\n}(this, function () { 'use strict';\n\n\t/**\r\n\t * 合并配置项\r\n\t * @opt \t\t\t基准项\r\n\t * @opt2\t \t\t合并项\r\n\t * return \t\t\toptions\r\n\t */\n\tfunction mergeOpt(opt, opt2) {\n\t  for (var i in opt) {\n\t    if (i === 'headers') {\n\t      opt2[i] = opt2[i] || {};\n\n\t      for (var j in opt[i]) {\n\t        opt2[i][j] = opt2[i][j] || opt[i][j];\n\t        continue;\n\t      }\n\t    }\n\n\t    opt2[i] = opt2[i] || opt[i];\n\t  }\n\n\t  return opt2;\n\t}\n\n\t/**\r\n\t * 执行请求函数\r\n\t * @opt \t\t\t请求配置\r\n\t * @resolve \t\t请求成功函数\r\n\t * @reject \t\t\t请求失败函数\r\n\t */\n\tfunction Xhr(opt, resolve, reject) {\n\t  var xhr;\n\n\t  if (window.XMLHttpRequest) {\n\t    xhr = new XMLHttpRequest();\n\t  } else {\n\t    xhr = new ActiveXObject('Microsoft.XMLHTTP');\n\t  }\n\n\t  xhr.onreadystatechange = function () {\n\t    if (xhr.readyState === 4) {\n\t      var res = xhr.responseText ? JSON.parse(xhr.responseText) : '';\n\t      var status = xhr.status;\n\t      var headers = xhr.getAllResponseHeaders().split('\\n');\n\n\t      if (xhr.status >= 200 && xhr.status < 300) {\n\t        // ssucess\n\t        resolve(res, status, headers);\n\t      } else {\n\t        // error\n\t        reject(res, status, headers);\n\t      }\n\n\t      opt.catch(res, status, headers);\n\t    }\n\t  };\n\n\t  xhr.open(opt.method, opt.url, opt.async);\n\n\t  for (var i in opt.headers) {\n\t    xhr.setRequestHeader(i, opt.headers[i]);\n\t  }\n\n\t  xhr.send(opt.data);\n\t}\n\n\tvar isPromise = !!window.Promise;\n\t/**\r\n\t * 包裹请求函数\r\n\t * @opt \t\t\t请求配置\r\n\t * return \t\t\t返回一个promise对象,或者一个带then函数的对象\r\n\t */\n\n\tfunction Defer(opt) {\n\t  var P;\n\n\t  if (isPromise) {\n\t    P = new Promise(Xhr.bind(null, opt));\n\t  } else {\n\t    P = {};\n\n\t    P.then = function (resolve, reject) {\n\t      Xhr.call(null, opt, resolve, reject);\n\t    };\n\t  }\n\n\t  return P;\n\t}\n\n\tfunction FileUpload(dom, opt) {\n\t  var _this = this;\n\n\t  var xhr = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\n\t  xhr.onload = uploadComplete.bind(this); // 请求完成\n\n\t  xhr.onerror = uploadFailed.bind(this); // 请求失败\n\n\t  xhr.upload.onprogress = progressFunction.bind(this); // 上传进度调用方法实现\n\n\t  var ot, oloaded;\n\n\t  xhr.upload.onloadstart = function () {\n\t    //上传开始执行方法\n\t    ot = new Date().getTime(); //设置上传开始时间\n\n\t    oloaded = 0; //设置上传开始时，以上传的文件大小为0\n\n\t    _this.fileItem.isUploadding = true;\n\t  };\n\n\t  this.opt = opt;\n\t  this.xhr = xhr;\n\t  this.dom = dom; // 上传成功响应\n\n\t  function uploadComplete(evt) {\n\t    //服务断接收完文件返回的结果\n\t    var res = parseFileRes(evt).res;\n\t    var status = parseFileRes(evt).status;\n\t    this.fileItem.isUpload = true;\n\t    this.fileItem.isUploadding = false;\n\t    this.onSuccessItem(this.fileItem, res, status);\n\t    this.clearUploadFile();\n\t  } // 上传失败\n\n\n\t  function uploadFailed(evt) {\n\t    var res = parseFileRes(evt).res;\n\t    var status = parseFileRes(evt).status;\n\t    this.fileItem.isError = true;\n\t    this.fileItem.isUploadding = false;\n\t    this.onErrorItem(this.fileItem, res, status);\n\t    this.clearUploadFile();\n\t  } // 上传进度实现方法，上传过程中会频繁调用该方法\n\n\n\t  function progressFunction(evt) {\n\t    var progress = {}; // 包含上传百分百 速度\n\n\t    var progressBar = {};\n\n\t    if (evt.lengthComputable) {\n\t      //\n\t      progressBar.max = evt.total;\n\t      progressBar.value = evt.loaded;\n\t      progress.percent = Math.round(evt.loaded / evt.total * 100);\n\t    }\n\n\t    var nt = new Date().getTime(); //获取当前时间\n\n\t    var pertime = (nt - ot) / 1000; //计算出上次调用该方法时到现在的时间差，单位为s\n\n\t    ot = new Date().getTime(); //重新赋值时间，用于下次计算\n\n\t    var perload = evt.loaded - oloaded; //计算该分段上传的文件大小，单位b\n\n\t    oloaded = evt.loaded; //重新赋值已上传文件大小，用以下次计算\n\t    //上传速度计算\n\n\t    var speed = perload / pertime; //单位b/s\n\n\t    var bspeed = speed;\n\t    var units = 'b/s'; //单位名称\n\n\t    if (speed / 1024 > 1) {\n\t      speed = speed / 1024;\n\t      units = 'kb/s';\n\t    }\n\n\t    if (speed / 1024 > 1) {\n\t      speed = speed / 1024;\n\t      units = 'Mb/s';\n\t    }\n\n\t    speed = speed.toFixed(1); //剩余时间\n\n\t    var resttime = ((evt.total - evt.loaded) / bspeed).toFixed(1);\n\t    progress.speed = speed + units;\n\t    progress.resttime = resttime;\n\t    if (bspeed == 0) progress.bspeed = '上传已取消';\n\t    this.onProgressItem(this.fileItem, progress);\n\t  }\n\t}\n\n\tFileUpload.prototype = {\n\t  upload: function upload() {\n\t    var file = this.dom.files[0];\n\t    var opt = this.opt;\n\t    var form = new FormData();\n\t    form.append(\"file\", file); // 文件对象\n\n\t    form.append(\"parm\", JSON.stringify(opt.data)); // 文件对象添加额外参数\n\t    // 构建fileItem\n\n\t    var fileItem = {\n\t      formData: form,\n\t      url: opt.url || \"\",\n\t      data: opt.data || \"\",\n\t      addr: this.dom.value || \"\",\n\t      isUpload: false,\n\t      isCancel: false,\n\t      isUploadding: false,\n\t      isError: false,\n\t      isUploadClear: opt.isUploadClear || false,\n\t      autoUpload: opt.autoUpload || false\n\t    };\n\t    this.fileItem = fileItem;\n\t    this.xhr.open(\"post\", this.opt.url, true); //post方式，url为服务器请求地址，true 该参数规定请求是否异步处理。\n\n\t    this.onBeforeUploadItem(this.fileItem);\n\t    this.xhr.send(this.fileItem.formData); //开始上传，发送form数据\n\t  },\n\t  onSuccessItem: function onSuccessItem() {},\n\t  onBeforeUploadItem: function onBeforeUploadItem() {},\n\t  onErrorItem: function onErrorItem() {},\n\t  onProgressItem: function onProgressItem() {},\n\t  clearUploadFile: function clearUploadFile() {\n\t    if (this.fileItem.isUploadClear) {\n\t      this.dom.value = \"\";\n\t      this.dom.files = null;\n\t    }\n\t  },\n\t  cancleUploadFile: function cancleUploadFile() {\n\t    this.fileItem.isCancel = true;\n\t    this.fileItem.isUploadding = false;\n\t    this.fileItem.isUpload = false;\n\t    this.xhr.abort();\n\t    this.clearUploadFile();\n\t  }\n\t};\n\n\tfunction parseFileRes(evt) {\n\t  return {\n\t    res: JSON.parse(evt.target.responseText),\n\t    status: evt.target.status\n\t  };\n\t}\n\n\tvar defaultOpt = {\n\t  baseUrl: '',\n\t  headers: {\n\t    'Content-Type': 'application/json;charset=utf-8'\n\t  },\n\t  // 默认异步操作\n\t  async: true,\n\t  // 默认跨域不带cookie\n\t  withCredentials: false\n\t};\n\t/**\r\n\t * Ajax构造函数\r\n\t */\n\n\tfunction Ajax() {}\n\n\tvar methods_1 = ['get', 'delete', 'head', 'options']; //不带data\n\n\tvar methods_2 = ['post', 'put', 'patch']; //带data\n\n\tvar _loop = function _loop(i) {\n\t  Ajax.prototype[methods_1[i]] = function (url, _opts) {\n\t    _opts = _opts || {};\n\t    var opts = mergeOpt(defaultOpt, _opts);\n\t    opts.method = methods_1[i].toUpperCase();\n\t    opts.url = opts.baseUrl + url;\n\t    opts.data = null;\n\t    opts.catch = this.catch;\n\t    return Defer(opts);\n\t  };\n\t};\n\n\tfor (var i in methods_1) {\n\t  _loop(i);\n\t}\n\n\tvar _loop2 = function _loop2(j) {\n\t  Ajax.prototype[methods_2[j]] = function (url, data, _opts) {\n\t    _opts = _opts || {};\n\n\t    if (!_opts.headers) {\n\t      _opts.headers = {};\n\t      _opts.headers['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n\t    } else {\n\t      if (!_opts.headers['Content-Type']) {\n\t        _opts.headers['Content-Type'] = 'application/x-www-form-urlencoded;charset=utf-8';\n\t      }\n\t    }\n\n\t    var opts = mergeOpt(defaultOpt, _opts);\n\t    opts.method = methods_2[j].toUpperCase();\n\t    opts.url = opts.baseUrl + url;\n\t    opts.data = data;\n\t    opts.catch = this.catch;\n\n\t    if (opts.data) {\n\t      var cache = [];\n\n\t      for (var i in opts.data) {\n\t        cache.push(i + '=' + opts.data[i]);\n\t      }\n\n\t      opts.data = cache.join('&');\n\t    }\n\n\t    return Defer(opts);\n\t  };\n\t};\n\n\tfor (var j in methods_2) {\n\t  _loop2(j);\n\t}\n\t/**\r\n\t * 纯配置请求函数\r\n\t */\n\n\tAjax.prototype.ajax = function (options) {\n\t  try {\n\t    var method = options.method.toLowerCase();\n\n\t    if (methods_1.indexOf(method) !== -1) {\n\t      return this[method](options.url, options);\n\t    } else if (methods_2.indexOf(method) !== -1) {\n\t      return this[method](options.url, options.data, options);\n\t    } else {\n\t      throw new Error('error');\n\t    }\n\t  } catch (e) {\n\t    throw new Error(e);\n\t  }\n\t};\n\t/** \r\n\t * 暴露默认配置\r\n\t */\n\n\n\tAjax.prototype.config = function (opt) {\n\t  defaultOpt = mergeOpt(defaultOpt, opt);\n\t};\n\t/** \r\n\t * 注册拦截函数\r\n\t */\n\n\n\tAjax.prototype.catch = function () {};\n\t/** \r\n\t * 文件上传\r\n\t */\n\n\n\tAjax.prototype.uploader = function (id, _opt) {\n\t  _opt = _opt || {};\n\t  var opt = mergeOpt(defaultOpt, _opt);\n\t  opt.url = opt.baseUrl + opt.url;\n\t  var dom = document.getElementById(id);\n\t  return new FileUpload(dom, opt);\n\t};\n\n\ttry {\n\t} catch (ex) {\n\t  throw new Error('请在浏览器环境下运行');\n\t}\n\n\tvar index = new Ajax();\n\n\treturn index;\n\n}));\n"]}